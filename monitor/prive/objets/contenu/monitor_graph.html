#SET{plugins,#EVAL{_DIR_PLUGINS}}

<div id="latence"></div>

[(#REM) Graphique de latence]
<script type="text/javascript">

var chart = dc.lineChart("#latence");
d3.csv("#GET{plugins}monitor/lib/dc.js/latence.csv", function(error, data) {

  
  data.forEach(function(x) {
    x.close = +x.close;
  });

  data = data.slice(0, 200);
 
  var ndx             = crossfilter(data),
      openDimension   = ndx.dimension(function(d) {return parseInt(d.latence);}),
      openGroup       = openDimension.group(),
      monthDimension  = ndx.dimension(function(d) {return new Date(new Date(d.date).setDate(1));}),
      closeGroup      = monthDimension.group().reduce(
        function(p,v) {
          p.push(v.close);
          return p;
        },
        function(p,v) {
          p.splice(p.indexOf(v.close), 1);
          return p;
        },
        function() {
          return [];
        }
      );
  console.log(data);

  chart
    .width(768)
    .height(480)
    .margins({top: 10, right: 50, bottom: 30, left: 50})
    .dimension(monthDimension)
    .group(closeGroup)
    .x(d3.time.scale().domain([new Date("01/01/2014"), new Date("01/01/2015")]))
    .round(d3.time.month.round)
    .xUnits(d3.time.months)
    .elasticY(true);

  dc.renderAll();
});
</script>


